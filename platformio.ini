; PlatformIO Project Configuration File
; MAVLink Wireless Bridge
;
; Protokolle:
;   1 = WiFi UDP AP (Air Unit erstellt Hotspot)
;   2 = WiFi UDP STA (Ground Unit verbindet zu Hotspot)
;   6 = ESP-NOW Long Range (~500m+)
;   8 = ESP-NOW Standard (~100m)
;   7 = ESP-NOW + BLE (experimentell, funktioniert nicht mit QGC)
;   9 = ESP-NOW + Classic BT (experimentell)

; ============================================
; Gemeinsame Einstellungen
; ============================================
[env]
platform = espressif32
board = nologo_esp32c3_super_mini
framework = arduino
board_build.partitions = no_ota.csv
monitor_speed = 115200
lib_deps =
    adafruit/Adafruit NeoPixel@^1.12.0

; ============================================
; WiFi Mode - Funktioniert mit QGC/Mission Planner
; ============================================

[env:air_unit]
; Air Unit am Flugcontroller - erstellt WLAN "MAVLink-Air"
build_flags =
    -D MODULE_ESP32C3_SUPER_MINI
    -D ARDUINO_ESP32C3_DEV
    -D UNIT_AIR
    -D WIRELESS_PROTOCOL=1
; upload_port = COM28

[env:ground_unit]
; Ground Unit - verbindet automatisch zum Air Unit WLAN
build_flags =
    -D MODULE_ESP32C3_SUPER_MINI
    -D ARDUINO_ESP32C3_DEV
    -D UNIT_GROUND
    -D WIRELESS_PROTOCOL=2
; upload_port = COM27

; ============================================
; ESP-NOW Long Range - Maximale Reichweite
; ============================================

[env:air_unit_espnow]
; Air Unit - ESP-NOW Long Range Mode
build_flags =
    -D MODULE_ESP32C3_SUPER_MINI
    -D ARDUINO_ESP32C3_DEV
    -D UNIT_AIR
    -D WIRELESS_PROTOCOL=6
upload_port = COM28

[env:ground_unit_espnow]
; Ground Unit - ESP-NOW Long Range Mode
; Verbindung zu QGC/MP über USB Serial
build_flags =
    -D MODULE_ESP32C3_SUPER_MINI
    -D ARDUINO_ESP32C3_DEV
    -D UNIT_GROUND
    -D WIRELESS_PROTOCOL=6
upload_port = COM27

; ============================================
; ESP-NOW Standard - Normale Reichweite
; ============================================

[env:air_unit_espnow_std]
; Air Unit - ESP-NOW Standard (kompatibel mit mehr Geräten)
build_flags =
    -D MODULE_ESP32C3_SUPER_MINI
    -D ARDUINO_ESP32C3_DEV
    -D UNIT_AIR
    -D WIRELESS_PROTOCOL=8
upload_port = COM28

[env:ground_unit_espnow_std]
; Ground Unit - ESP-NOW Standard
build_flags =
    -D MODULE_ESP32C3_SUPER_MINI
    -D ARDUINO_ESP32C3_DEV
    -D UNIT_GROUND
    -D WIRELESS_PROTOCOL=8
; upload_port = COM27

; ============================================
; EXPERIMENTELL - Nicht vollständig funktional
; ============================================

[env:ground_unit_esp32_bt]
; Ground Unit mit ESP32 DevKit + Classic Bluetooth
; ESP-NOW empfängt von Air Unit, Bluetooth SPP sendet an Tablet/PC
; EXPERIMENTELL: Nicht vollständig getestet
board = az-delivery-devkit-v4
build_flags =
    -D MODULE_ESP32_DEVKIT
    -D UNIT_GROUND
    -D WIRELESS_PROTOCOL=9
upload_port = COM4
